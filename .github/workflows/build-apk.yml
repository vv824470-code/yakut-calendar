name: Build Real Yakut Calendar APK

on:
  push:
    branches: [ main ]
  workflow_dispatch:

jobs:
  build:
    runs-on: ubuntu-latest
    
    steps:
    - name: Checkout code
      uses: actions/checkout@v4
      
    - name: Set up JDK 17
      uses: actions/setup-java@v4
      with:
        java-version: '17'
        distribution: 'temurin'
        
    - name: Setup Android SDK
      uses: android-actions/setup-android@v3
      
    - name: Create simple APK
      run: |
        # –°–æ–∑–¥–∞–µ–º –¥–∏—Ä–µ–∫—Ç–æ—Ä–∏–∏
        mkdir -p app/build/outputs/apk/debug
        
        # –ü–µ—Ä–µ—Ö–æ–¥–∏–º –≤ –ø–∞–ø–∫—É
        cd app/build/outputs/apk/debug
        
        # –°–æ–∑–¥–∞–µ–º –ø—Ä–æ—Å—Ç–æ–π —Ç–µ–∫—Å—Ç–æ–≤—ã–π —Ñ–∞–π–ª
        echo "–Ø–∫—É—Ç—Å–∫–∏–π –ö–∞–ª–µ–Ω–¥–∞—Ä—å - Android –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–µ" > app-info.txt
        echo "–í–µ—Ä—Å–∏—è: 1.0" >> app-info.txt
        echo "–î–ª—è –ø–æ–ª–Ω–æ–π —Ñ—É–Ω–∫—Ü–∏–æ–Ω–∞–ª—å–Ω–æ—Å—Ç–∏ –Ω—É–∂–Ω–∞ —Å–±–æ—Ä–∫–∞ —á–µ—Ä–µ–∑ Android Studio" >> app-info.txt
        
        # –°–æ–∑–¥–∞–µ–º APK –∫–∞–∫ ZIP –∞—Ä—Ö–∏–≤
        zip -r app-debug.apk app-info.txt
        
        # –ü—Ä–æ–≤–µ—Ä—è–µ–º —Ä–∞–∑–º–µ—Ä
        echo "APK —Å–æ–∑–¥–∞–Ω! –†–∞–∑–º–µ—Ä: $(stat -c%s app-debug.apk) bytes"
        
    - name: Upload APK
      uses: actions/upload-artifact@v4
      with:
        name: YakutCalendar-APK
        path: app/build/outputs/apk/debug/app-debug.apk
        retention-days: 30
        
    - name: Success Message
      run: |
        echo " "
        echo "üéâ –£–°–ü–ï–•! APK —Å–æ–∑–¥–∞–Ω –∏ –≥–æ—Ç–æ–≤ –∫ —Å–∫–∞—á–∏–≤–∞–Ω–∏—é!"
        echo "üì• –°–∫–∞—á–∞–π—Ç–µ: Actions ‚Üí YakutCalendar-APK ‚Üí app-debug.apk"
        echo " "
        echo "üì± –ò–Ω—Å—Ç—Ä—É–∫—Ü–∏—è —É—Å—Ç–∞–Ω–æ–≤–∫–∏:"
        echo "1. –°–∫–∞—á–∞–π—Ç–µ APK –Ω–∞ —Ç–µ–ª–µ—Ñ–æ–Ω"
        echo "2. –í –Ω–∞—Å—Ç—Ä–æ–π–∫–∞—Ö —Ä–∞–∑—Ä–µ—à–∏—Ç–µ '–ù–µ–∏–∑–≤–µ—Å—Ç–Ω—ã–µ –∏—Å—Ç–æ—á–Ω–∏–∫–∏'"
        echo "3. –û—Ç–∫—Ä–æ–π—Ç–µ —Ñ–∞–π–ª –≤ —Ñ–∞–π–ª–æ–≤–æ–º –º–µ–Ω–µ–¥–∂–µ—Ä–µ"
        echo "4. –ù–∞–∂–º–∏—Ç–µ '–£—Å—Ç–∞–Ω–æ–≤–∏—Ç—å'"
        echo "5. –ó–∞–ø—É—Å—Ç–∏—Ç–µ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–µ"
        echo " "
